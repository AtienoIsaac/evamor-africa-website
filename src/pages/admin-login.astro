---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Admin Login | Evamor Africa">
  <section class="admin-login">
    <p class="eyebrow">Admin Access</p>
    <h1>Login to the CMS</h1>
    <p>
      Use your Netlify Identity email and password. If you never finished account
      setup, use the password reset option from the login dialog first.
    </p>
    <div class="actions">
      <button id="identity-login" type="button">Open Login</button>
      <a href="/admin/">Go to CMS</a>
    </div>
  </section>

  <script is:inline>
    const openLogin = () => {
      if (window.netlifyIdentity) {
        window.netlifyIdentity.open("login");
      }
    };

    document.getElementById("identity-login")?.addEventListener("click", openLogin);

    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", (user) => {
        if (user) {
          window.location.href = "/admin/";
          return;
        }

        openLogin();
      });

      window.netlifyIdentity.on("login", () => {
        window.location.href = "/admin/";
      });
    }
  </script>

  <style>
    .admin-login {
      max-width: 640px;
      margin: 4rem auto;
      padding: 2rem;
      border: 1px solid var(--border-light);
      border-radius: 12px;
      background: #ffffff;
      box-shadow: 0 20px 45px rgba(15, 23, 42, 0.08);
    }

    .eyebrow {
      margin: 0 0 0.75rem;
      color: var(--evamor-green);
      font-size: 0.8rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .actions {
      display: flex;
      gap: 1rem;
      align-items: center;
      margin-top: 1.5rem;
    }

    .actions button,
    .actions a {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-height: 44px;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 600;
      text-decoration: none;
    }

    .actions button {
      border: none;
      background: var(--evamor-green);
      color: #ffffff;
      cursor: pointer;
    }

    .actions a {
      border: 1px solid var(--border-light);
      color: var(--text-main);
      background: #ffffff;
    }
  </style>
</Layout>
